<!DOCTYPE html>
<html>
<head>
<title>Ultimate Calculator App</title>
<style>
body {
  font-family:'Segoe UI',sans-serif;
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  transition:background 0.5s;
}
.dark-mode{background:linear-gradient(135deg,#1f1c2c,#928dab);color:white;}
#loginScreen,#signUpScreen,#appScreen{
  background:white;
  padding:30px;
  border-radius:20px;
  box-shadow:0 8px 20px rgba(0,0,0,0.3);
  text-align:center;
  width:320px;
  transition: background 0.5s,color 0.5s;
}
.dark-mode #loginScreen,.dark-mode #signUpScreen,.dark-mode #appScreen{background:#333;color:white;}
h1{margin-bottom:20px;color:#ff4d6d;}
#welcome{word-wrap:break-word;overflow-wrap:break-word;text-align:center;font-size:18px;max-width:100%;}
input{width:90%;padding:10px;margin:10px 0;border:2px solid #ff4d6d;border-radius:10px;font-size:16px;box-sizing:border-box;}
.dark-mode input{background:#555;color:white;border:2px solid #ff9a9e;}
button{background:#ff4d6d;color:white;border:none;padding:10px 18px;border-radius:10px;font-size:16px;cursor:pointer;margin-top:10px;transition:transform 0.2s,background 0.2s;}
button:hover{background:#ff2e4d;transform:scale(1.05);}
#errorMsg,#signUpError{color:red;margin-top:5px;font-weight:bold;opacity:0;transition:opacity 0.5s;}
#calculator{margin-top:20px;background:#222;padding:15px;border-radius:20px;box-shadow:0px 8px 20px rgba(0,0,0,0.5);transition:background 0.5s;}
.dark-mode #calculator{background:#111;}
#display{width:100%;max-width:100%;height:40px;font-size:28px;text-align:right;margin-bottom:8px;border:none;border-radius:10px;padding:10px;background:#111;color:#0f0;overflow-x:auto;white-space:nowrap;box-sizing:border-box;text-overflow:ellipsis;}
#display::-webkit-scrollbar{height:6px;}
#display::-webkit-scrollbar-thumb{background:#888;border-radius:3px;}
.btn{width:55px;height:45px;margin:5px;font-size:18px;font-weight:bold;border:none;border-radius:12px;cursor:pointer;transition:transform 0.2s, background 0.2s;}
.btn:hover{transform:scale(1.05);}
.btn:active{transform:scale(0.95);}
.number{background:#444;color:white;}
.operator{background:#ff9500;color:white;}
.equal{background:#34c759;color:white;}
.clear{background:#ff3b30;color:white;}
.delete{background:#999;color:black;}
.dark-mode .number{background:#666;}
.dark-mode .operator{background:#ff7f50;}
.dark-mode .equal{background:#28a745;}
.dark-mode .clear{background:#ff5555;}
.dark-mode .delete{background:#888;}
#modeToggle{margin-top:15px;font-size:14px;padding:8px 12px;border-radius:8px;background:#444;color:white;}
#footer{position:fixed;bottom:10px;width:100%;text-align:center;font-size:14px;color:#555;font-weight:bold;pointer-events:none;}
.dark-mode #footer{color:#ccc;}
</style>
</head>
<body>

<div id="loginScreen">
<h1>Welcome!</h1>
<p>Please sign in to continue</p>
<input type="text" id="loginUsername" placeholder="Username"><br>
<div style="position:relative;">
<input type="password" id="loginPassword" placeholder="Password" style="width:80%;">
<button id="showPassLogin" style="position:absolute;right:5px;top:5px;padding:5px;font-size:12px;">Show</button>
</div>
<button id="loginBtn">Sign In</button><br>
<button onclick="showSignUp()">Sign Up</button>
<div id="errorMsg"></div>
</div>

<div id="signUpScreen" style="display:none;">
<h1>Sign Up</h1>
<input type="text" id="signUpUsername" placeholder="Username"><br>
<div style="position:relative;">
<input type="password" id="signUpPassword" placeholder="Password" style="width:80%;">
<button id="showPassSignUp" style="position:absolute;right:5px;top:5px;padding:5px;font-size:12px;">Show</button>
</div>
<button id="signUpBtn">Create Account</button><br>
<button onclick="showLogin()">Back to Login</button>
<div id="signUpError"></div>
</div>

<div id="appScreen" style="display:none;">
<h1 id="welcome"></h1>
<button id="modeToggle" onclick="toggleMode()">Toggle Dark/Light Mode</button>
<button style="margin-top:10px;background:#888;color:white;" onclick="logout()">Logout</button>
<button style="margin-top:10px;background:#ff5555;color:white;" onclick="deleteAccount()">Delete Account</button>
<div id="calculator">
<input type="text" id="display" disabled><br>
<button class="btn clear" onclick="clearDisplay()">C</button>
<button class="btn operator" onclick="appendValue('/')">÷</button>
<button class="btn operator" onclick="appendValue('*')">×</button>
<button class="btn delete" onclick="deleteLast()">←</button><br>
<button class="btn number" onclick="appendValue('7')">7</button>
<button class="btn number" onclick="appendValue('8')">8</button>
<button class="btn number" onclick="appendValue('9')">9</button>
<button class="btn operator" onclick="appendValue('-')">-</button><br>
<button class="btn number" onclick="appendValue('4')">4</button>
<button class="btn number" onclick="appendValue('5')">5</button>
<button class="btn number" onclick="appendValue('6')">6</button>
<button class="btn operator" onclick="appendValue('+')">+</button><br>
<button class="btn number" onclick="appendValue('1')">1</button>
<button class="btn number" onclick="appendValue('2')">2</button>
<button class="btn number" onclick="appendValue('3')">3</button>
<button class="btn equal" onclick="calculate()">=</button><br>
<button class="btn number" onclick="appendValue('0')">0</button>
<button class="btn number" onclick="appendValue('.')">.</button>
</div>
</div>

<div id="footer">Made By: Rico Cowans</div>

<script>
let display=document.getElementById("display");
let body=document.body;
let currentUser=localStorage.getItem("currentUser")||null;
let users=JSON.parse(localStorage.getItem('users'))||[];
let darkMode=localStorage.getItem("darkMode")||"false";

if(darkMode==="true"){body.classList.add("dark-mode");}

function showSignUp(){document.getElementById("loginScreen").style.display="none";document.getElementById("signUpScreen").style.display="block";fadeOutError();}
function showLogin(){document.getElementById("loginScreen").style.display="block";document.getElementById("signUpScreen").style.display="none";fadeOutError();}
function fadeOutError(){[document.getElementById("errorMsg"),document.getElementById("signUpError")].forEach(e=>{e.style.opacity=0;});}

document.getElementById("showPassLogin").onclick=function(){let pass=document.getElementById("loginPassword");this.innerText=pass.type==="password"?"Hide":"Show";pass.type=pass.type==="password"?"text":"password";}
document.getElementById("showPassSignUp").onclick=function(){let pass=document.getElementById("signUpPassword");this.innerText=pass.type==="password"?"Hide":"Show";pass.type=pass.type==="password"?"text":"password";}

document.getElementById("signUpBtn").onclick=function(){
  let username=document.getElementById("signUpUsername").value.trim();
  let password=document.getElementById("signUpPassword").value.trim();
  let signUpError=document.getElementById("signUpError");
  if(!username||!password){signUpError.innerText="Please fill all fields!";signUpError.style.opacity=1;return;}
  if(users.find(u=>u.username===username)){signUpError.innerText="Username exists!";signUpError.style.opacity=1;return;}
  users.push({username,password});
  localStorage.setItem('users',JSON.stringify(users));
  localStorage.setItem("currentUser",username);
  currentUser=username;
  document.getElementById("signUpScreen").style.display="none";
  document.getElementById("appScreen").style.display="block";
  document.getElementById("welcome").innerText="Welcome, "+username+"!";
}

document.getElementById("loginBtn").onclick=function(){
  let username=document.getElementById("loginUsername").value.trim();
  let password=document.getElementById("loginPassword").value.trim();
  let errorMsg=document.getElementById("errorMsg");
  let user=users.find(u=>u.username===username&&u.password===password);
  if(user){errorMsg.style.opacity=0;document.getElementById("loginScreen").style.display="none";document.getElementById("appScreen").style.display="block";document.getElementById("welcome").innerText="Welcome, "+username+"!";localStorage.setItem("currentUser",username);currentUser=username;}
  else{errorMsg.innerText="Incorrect Username or Password!";errorMsg.style.opacity=1;setTimeout(()=>{errorMsg.style.opacity=0;},3000);}
}

function toggleMode(){body.classList.toggle("dark-mode");localStorage.setItem("darkMode",body.classList.contains("dark-mode"))}
function resizeText(){display.style.fontSize=display.value.length>12?"20px":display.value.length>6?"24px":"28px";}
function appendValue(v){display.value+=v;resizeText();}
function clearDisplay(){display.value="";resizeText();}
function deleteLast(){display.value=display.value.slice(0,-1);resizeText();}
function calculate(){try{display.value=eval(display.value);}catch{display.value="Error";}resizeText();}
function logout(){localStorage.removeItem("currentUser");currentUser=null;document.getElementById("appScreen").style.display="none";document.getElementById("loginScreen").style.display="block";}
function deleteAccount(){if(currentUser){users=users.filter(u=>u.username!==currentUser);localStorage.setItem("users",JSON.stringify(users));logout();alert("Account deleted.");}}

window.onload=function(){if(currentUser){document.getElementById("loginScreen").style.display="none";document.getElementById("appScreen").style.display="block";document.getElementById("welcome").innerText="Welcome, "+currentUser+"!";}}

document.addEventListener("keydown",e=>{
  if(document.getElementById("appScreen").style.display==="block"){
    if(/[0-9]/.test(e.key)) appendValue(e.key);
    if(["+","-","*","/","."].includes(e.key)) appendValue(e.key);
    if(e.key==="Enter") calculate();
    if(e.key==="Backspace") deleteLast();
  }
});
</script>
</body>
</html>
